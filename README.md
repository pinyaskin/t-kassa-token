# Генерация и извлечение токенов безопасности T-Кассы
Этот репозиторий предоставляет базовую библиотеку для генерации и извлечения токенов из запросов Т-Кассы.

Библиотека позволяет сгенерировать токен перед отправкой запроса к API Т-Кассы, а также валидировать токен по паролю из запроса Т-Кассы к пользовательскому приложению.

Алгоритм написан на основе документации [Прием платежей Т-Касса v.1.42](https://www.tbank.ru/kassa/dev/payments/#section/Token)

## Генерация токена

Для генерации токена, нужно передать сырой JSON-запрос в формате строки (без включения пароля от терминала в него) и пароль терминала Т-Касса. Обертка Tokens позволяет это сделать следующим образом:
``` java
String token = Tokens.builder()
                     .setRequestBody(jsonRequest) // передайте json-запрос
                     .setPassword(password) // передайте пароль к терминалу Т-Кассы
                     .build(); // сформируйте токен доступа
```

Если в Вашем проекте используются POJO для генерации запросов к Т-Кассе, можно воспользоваться ObjectMapper для преобразования POJO в JSON формата String.

## Валидация токена

Для валидации токена можно передать сырой JSON-запрос от Т-Кассы к Вашему сервису и пароль терминала. 

Запрос уже должен хранить в себе токен:
``` java
boolean isValid = Tokens.builder()
                        .setRequestBody(jsonRequest) // передайте json-запрос
                        .setPassword(password) // передайте пароль к терминалу Т-Кассы
                        .isValid(); // проверьте валидность запроса
```

### Контакты
Телеграм - [Пиняскин Илия](https://t.me/pinyaskin)

Почта - pinyaskiniliya163@gmail.com